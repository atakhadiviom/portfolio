import matter from 'gray-matter';

// Storage key for localStorage
const STORAGE_KEY = 'blog_posts';

// Initial default posts
const defaultPosts = [
    {
        slug: 'meta-ads-oman-2024',
        titleAr: 'أفضل استراتيجيات إعلانات ميتا في عمان 2024',
        titleEn: 'Best Meta Ads Strategies in Oman 2024',
        date: '2024-11-22',
        category: 'Digital Marketing',
        categoryAr: 'التسويق الرقمي',
        excerptAr: 'دليل شامل لتحسين حملات إعلانات ميتا في السوق العماني مع أمثلة عملية ونصائح مجربة لزيادة المبيعات.',
        excerptEn: 'Complete guide to optimizing Meta Ads campaigns in the Omani market with practical examples and proven tips to increase sales.',
        image: '/blog-images/meta-ads-oman.png',
        keywords: ['إعلانات ميتا', 'عمان', 'التسويق الرقمي', 'مسقط'],
        contentAr: `# أفضل استراتيجيات إعلانات ميتا في عمان 2024

إعلانات ميتا (فيسبوك وإنستغرام) أصبحت من أقوى أدوات التسويق الرقمي في عمان. في هذا الدليل الشامل، سنتعرف على أفضل الاستراتيجيات لتحقيق نتائج مميزة.

## لماذا إعلانات ميتا مهمة في عمان؟

السوق العماني يشهد نمواً كبيراً في استخدام وسائل التواصل الاجتماعي:
- أكثر من 3.5 مليون مستخدم نشط على فيسبوك
- 2.8 مليون مستخدم على إنستغرام
- معدل تفاعل عالي مع المحتوى المحلي

## استراتيجيات النجاح

### 1. استهداف الجمهور المحلي
- استخدم الاستهداف الجغرافي لمسقط وصلالة
- حدد الاهتمامات المحلية
- استهدف اللغة العربية أولاً

### 2. المحتوى الإبداعي
- استخدم صور عالية الجودة
- أضف نصوص عربية واضحة
- اختبر فيديوهات قصيرة (15-30 ثانية)

### 3. الميزانية والتوقيت
- ابدأ بميزانية 100-200 ريال عماني
- أفضل أوقات النشر: 8-10 مساءً
- اختبر عطلات نهاية الأسبوع

## نصائح عملية

1. **اختبر دائماً**: جرب 3-4 إعلانات مختلفة
2. **راقب النتائج**: استخدم Facebook Pixel
3. **حسّن باستمرار**: عدّل الحملات بناءً على البيانات

## الخلاصة

إعلانات ميتا في عمان تحتاج إلى فهم عميق للسوق المحلي. باتباع هذه الاستراتيجيات، يمكنك تحقيق نتائج ممتازة بميزانية معقولة.

**هل تحتاج مساعدة في إعلاناتك؟** تواصل معي اليوم!`,
        contentEn: `# Best Meta Ads Strategies in Oman 2024

Meta Ads (Facebook and Instagram) have become one of the most powerful digital marketing tools in Oman. In this comprehensive guide, we'll explore the best strategies for achieving outstanding results.

## Why Meta Ads Matter in Oman?

The Omani market is experiencing significant growth in social media usage:
- Over 3.5 million active Facebook users
- 2.8 million Instagram users
- High engagement rate with local content

## Success Strategies

### 1. Local Audience Targeting
- Use geographic targeting for Muscat and Salalah
- Define local interests
- Target Arabic language first

### 2. Creative Content
- Use high-quality images
- Add clear Arabic text
- Test short videos (15-30 seconds)

### 3. Budget and Timing
- Start with 100-200 OMR budget
- Best posting times: 8-10 PM
- Test weekends

## Practical Tips

1. **Always Test**: Try 3-4 different ads
2. **Monitor Results**: Use Facebook Pixel
3. **Continuously Optimize**: Adjust campaigns based on data

## Conclusion

Meta Ads in Oman require a deep understanding of the local market. By following these strategies, you can achieve excellent results with a reasonable budget.

**Need help with your ads?** Contact me today!`
    },
    {
        slug: 'wordpress-vs-django-oman',
        titleAr: 'ووردبريس أم Django: أيهما أفضل لمشروعك في عمان؟',
        titleEn: 'WordPress vs Django: Which is Better for Your Project in Oman?',
        date: '2024-11-20',
        category: 'Web Development',
        categoryAr: 'تطوير المواقع',
        excerptAr: 'مقارنة شاملة بين ووردبريس و Django لمساعدتك في اختيار المنصة المناسبة لمشروعك في عمان.',
        excerptEn: 'Comprehensive comparison between WordPress and Django to help you choose the right platform for your project in Oman.',
        image: '/blog-images/wordpress-django.png',
        keywords: ['ووردبريس', 'Django', 'تطوير مواقع', 'عمان'],
        contentAr: `# ووردبريس أم Django: أيهما أفضل لمشروعك في عمان؟

عند بدء مشروع موقع إلكتروني في عمان، أحد أهم القرارات هو اختيار المنصة المناسبة. دعنا نقارن بين ووردبريس و Django.

## ووردبريس (WordPress)

### المميزات
- سهل الاستخدام للمبتدئين
- آلاف القوالب الجاهزة
- إضافات متنوعة
- تكلفة أقل للبداية

### مناسب لـ:
- المدونات
- المواقع التعريفية
- المتاجر الإلكترونية البسيطة
- الشركات الصغيرة والمتوسطة

## Django

### المميزات
- أمان عالي
- مرونة كاملة
- أداء ممتاز
- قابلية توسع كبيرة

### مناسب لـ:
- التطبيقات المعقدة
- أنظمة إدارة مخصصة
- المنصات الكبيرة
- المشاريع التي تحتاج تخصيص كامل

## التكلفة في عمان

**ووردبريس**: 200-500 ريال عماني
**Django**: 500-2000 ريال عماني

## الخلاصة

اختر ووردبريس إذا كنت تريد موقع سريع وبسيط. اختر Django إذا كنت تحتاج تطبيق مخصص ومعقد.`,
        contentEn: `# WordPress vs Django: Which is Better for Your Project in Oman?

When starting a website project in Oman, one of the most important decisions is choosing the right platform. Let's compare WordPress and Django.

## WordPress

### Advantages
- Easy to use for beginners
- Thousands of ready-made templates
- Diverse plugins
- Lower initial cost

### Suitable for:
- Blogs
- Business websites
- Simple e-commerce stores
- Small and medium businesses

## Django

### Advantages
- High security
- Complete flexibility
- Excellent performance
- Great scalability

### Suitable for:
- Complex applications
- Custom management systems
- Large platforms
- Projects requiring full customization

## Cost in Oman

**WordPress**: 200-500 OMR
**Django**: 500-2000 OMR

## Conclusion

Choose WordPress if you want a quick and simple website. Choose Django if you need a custom and complex application.`
    },
    {
        slug: 'odoo-erp-oman-businesses',
        titleAr: 'كيف يساعد نظام Odoo الشركات العمانية على النمو',
        titleEn: 'How Odoo ERP Helps Omani Businesses Grow',
        date: '2024-11-18',
        category: 'Business Solutions',
        categoryAr: 'حلول الأعمال',
        excerptAr: 'اكتشف كيف يمكن لنظام Odoo ERP تحسين كفاءة شركتك في عمان وزيادة الإنتاجية.',
        excerptEn: 'Discover how Odoo ERP can improve your company efficiency in Oman and increase productivity.',
        image: '/blog-images/odoo-erp-oman.png',
        keywords: ['Odoo', 'ERP', 'عمان', 'إدارة الأعمال'],
        contentAr: `# كيف يساعد نظام Odoo الشركات العمانية على النمو

نظام Odoo ERP أصبح الحل المفضل للشركات في عمان. دعنا نتعرف على كيفية استفادة شركتك منه.

## ما هو Odoo؟

Odoo هو نظام إدارة موارد المؤسسات (ERP) مفتوح المصدر يجمع جميع عمليات شركتك في منصة واحدة.

## المميزات للشركات العمانية

### 1. إدارة المبيعات
- تتبع العملاء والفرص
- إدارة عروض الأسعار
- تقارير مبيعات تفصيلية

### 2. إدارة المخزون
- تتبع المنتجات
- إدارة المستودعات
- تنبيهات نقص المخزون

### 3. المحاسبة
- فواتير تلقائية
- تقارير مالية
- متوافق مع القوانين العمانية

## التكلفة

- **النسخة المجانية**: مناسبة للشركات الصغيرة
- **النسخة المدفوعة**: من 200 ريال عماني شهرياً

## قصص نجاح في عمان

شركات عمانية عديدة حققت:
- زيادة 40% في الكفاءة
- تقليل 30% في التكاليف
- تحسين خدمة العملاء

## الخلاصة

Odoo هو استثمار ذكي لأي شركة في عمان تريد النمو والتطور.`,
        contentEn: `# How Odoo ERP Helps Omani Businesses Grow

Odoo ERP has become the preferred solution for companies in Oman. Let's explore how your company can benefit from it.

## What is Odoo?

Odoo is an open-source Enterprise Resource Planning (ERP) system that combines all your company operations in one platform.

## Benefits for Omani Companies

### 1. Sales Management
- Track customers and opportunities
- Manage quotations
- Detailed sales reports

### 2. Inventory Management
- Track products
- Manage warehouses
- Stock shortage alerts

### 3. Accounting
- Automatic invoicing
- Financial reports
- Compliant with Omani regulations

## Cost

- **Free Version**: Suitable for small businesses
- **Paid Version**: From 200 OMR monthly

## Success Stories in Oman

Many Omani companies achieved:
- 40% increase in efficiency
- 30% reduction in costs
- Improved customer service

## Conclusion

Odoo is a smart investment for any company in Oman looking to grow and develop.`
    }
];

// Initialize localStorage with default posts if empty
const initializeStorage = () => {
    const stored = localStorage.getItem(STORAGE_KEY);
    if (!stored) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(defaultPosts));
    }
};

// Load posts from localStorage
export const loadBlogPosts = () => {
    initializeStorage();
    const stored = localStorage.getItem(STORAGE_KEY);
    return stored ? JSON.parse(stored) : defaultPosts;
};

// Save a blog post (create or update)
export const saveBlogPost = (post) => {
    const posts = loadBlogPosts();
    const existingIndex = posts.findIndex(p => p.slug === post.slug);

    if (existingIndex >= 0) {
        // Update existing post
        posts[existingIndex] = post;
    } else {
        // Add new post
        posts.unshift(post); // Add to beginning
    }

    localStorage.setItem(STORAGE_KEY, JSON.stringify(posts));
    return post;
};

// Delete a blog post
export const deleteBlogPost = (slug) => {
    const posts = loadBlogPosts();
    const filtered = posts.filter(p => p.slug !== slug);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));
    return true;
};

// Get all blog posts in selected language
export const getBlogPosts = (language = 'AR') => {
    const posts = loadBlogPosts();
    return posts.map(post => ({
        ...post,
        title: language === 'AR' ? post.titleAr : post.titleEn,
        excerpt: language === 'AR' ? post.excerptAr : post.excerptEn,
        content: language === 'AR' ? post.contentAr : post.contentEn,
        categoryDisplay: language === 'AR' ? post.categoryAr : post.category
    }));
};

// Get single blog post
export const getBlogPost = (slug, language = 'AR') => {
    const posts = loadBlogPosts();
    const post = posts.find(p => p.slug === slug);
    if (!post) return null;

    return {
        ...post,
        title: language === 'AR' ? post.titleAr : post.titleEn,
        excerpt: language === 'AR' ? post.excerptAr : post.excerptEn,
        content: language === 'AR' ? post.contentAr : post.contentEn,
        categoryDisplay: language === 'AR' ? post.categoryAr : post.category
    };
};

// Get categories
export const getCategories = (language = 'AR') => {
    const posts = loadBlogPosts();
    const categories = [...new Set(posts.map(p => language === 'AR' ? p.categoryAr : p.category))];
    return categories;
};

// Filter by category
export const filterByCategory = (category, language = 'AR') => {
    return getBlogPosts(language).filter(post => post.categoryDisplay === category);
};

// Generate slug from title
export const generateSlug = (title) => {
    return title
        .toLowerCase()
        .replace(/[^\w\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-')
        .trim();
};
